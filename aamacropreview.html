<!DOCTYPE html>
<HTML lang="en">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META name="description" content="aa_macro previewer / syntax display">
<META name="keywords" content="HTML,CSS,JavaScript,aa_macro,wtfm">
<SCRIPT type="text/javascript">
window.onload = function()
{
    hitme = document.getElementById("dpagecontentx")
    hitme.focus();
};
function clearem()
{
var clr = document.getElementById("pretty");
	clr.innerText = '';
	clr = document.getElementById("dpagecontentx");
	clr.focus();
	clr.innerText = '';
	clr = document.getElementById("pccount");
	clr.innerText = '0';
};
function showem()
{
var samt = '<htmltag style="width: 30em;">foo<\/htmltag> {style content} [built-in content]\n' +
'{style [built-in {style content} content]} unincorporated text\n' +
'[built-in] {style} unincorporated "quoted" text can\'t stop this\n\n' +
'[style italics <i>[b]</i>]\n' +
'{italics slanty text}';

var src = document.getElementById("dpagecontentx");
	src.innerText = samt;
	onpCharInput('foo');
	src.focus();
};

function onpCharInput(e)
{
var brco = "ffff00";
var brtco = "888888";
var brtag = "008800";

var sqco = "ff0000";
var sqtco = "ff8800";
var sqtag = "ff00ff";

var anco = "884444";
var antco = "5599FF";

var quco = "00ffff";
var qutco = "ffffff";

var squco = "ff00ff";
var squtco = "4488FF";

	var msg = document.getElementById("mesg");
	var src = document.getElementById("dpagecontentx");
	var dig = document.getElementById("pretty");
	var cpco = src.innerText;
	var cpc = cpco;
	var cpct = cpc.length.toString();
	var cpcr = '';
	var insq = 0;
	var inbr = 0;
	var inq = 0;
	var ins = 0;
	var pushed = '';
	var bc = 0;
	var sc = 0;
	var sqb = 0;
	var dqb = 0;
	for (var i = 0; i < cpco.length; i++) // >
	{
		var c = cpco[i];
		if (c == '[')      { bc = bc + 1; inbr += 1; pushed = '<font color="#'+brtco+'">'; c = '<font color="#'+brco+'">' + c + '<\/font><font color="#'+brtag+'">'; }
		else if (c == ']') { bc = bc - 1; inbr -= 1; pushed=''; c = '<\/font><font color="#'+brco+'">' + c + '<\/font>'; }

		else if (c == '{') { sc = sc + 1; insq += 1; pushed = '<font color="#'+sqtco+'">'; c = '<font color="#'+sqco+'">' + c + '<\/font><font color="#'+sqtag+'">'; }
		else if (c == '}') { sc = sc - 1; insq -= 1; pushed='';c = '<\/font><font color="#'+sqco+'">' + c + '<\/font>'; }

		else if (c == '<') { insq += 1; c = '<font color="#'+anco+'">' + c + '<\/font><font color="#'+antco+'">'; }
		else if (c == '>') { insq -= 1; c = '<\/font><font color="#'+anco+'">' + c + '<\/font>'; }

		else if (c == ' ')
		{
			if (pushed != '') { c = '<\/font>' + c + pushed; pushed = ''; }
		}
		else if (c == '"')
		{
			if (dqb == 1) { dqb = 0; } else { dqb = 1; }
			if (inq == 1) { inq=0; } else { inq=1;}
			if (inq == 1)
			{
				c = '<font color="#'+quco+'">' + c + '<\/font>';
				c = c + '<font color="#'+qutco+'">';
			}
			else // leaving quote
			{
				c = '<\/font><font color="#'+quco+'">' + c + '<\/font>';
			}
		}
		else if (c == "'")
		{
			c = '<font color="#'+squco+'">' + c + '<\/font>';
		}
		else if (0) // (c == "'")
		{
			if (sqb == 1) { sqb = 0; } else { sqb = 1; }
			if (ins == 1) { ins=0; } else { ins=1;}
			if (ins == 1)
			{
				c = '<font color="#'+squco+'">' + c + '<\/font>';
				c = c + '<font color="#'+squtco+'">';
			}
			else // leaving quote
			{
				c = '<\/font><font color="#'+squco+'">' + c + '<\/font>';
			}
		}
		cpcr = cpcr + c;
	}
	
	dig.innerHTML = cpcr;
	var tgt = document.getElementById("pccount");
	tgt.innerHTML = cpct;
	var hi = '';
	var ho = ''
	var hsi = '';
	var hso = ''
	var dqi = 'ok';
	var sqi = 'ok';
	if (bc != 0) { hi = '<b><font color="#ff0000">'; ho = '<\/font><\/b>';}
	if (sc != 0) { hsi = '<b><font color="#ff0000">'; hso = '<\/font><\/b>';}
	if (sqb != 0) { sqi = '<b><font color="#ff0000">unbalanced<\/font>'; }
	if (dqb != 0) { dqi = '<b><font color="#ff0000">unbalanced<\/font>'; }
	msg.innerHTML = 'Balance: []='+hi+bc.toString()+ho+' / {}='+hsi+sc.toString()+hso+ ' / "='+dqi; //+"; // '="+sqi;
};
</SCRIPT>
<title>aa_macro syntax / display</title>
</HEAD>
<BODY>
<div style="text-align: center;">
<div style="width: 90%; margin-left: auto; margin-right: auto; text-align: left;">
<h3>Previewer for aa_macro and wtfm</h3>
</div>
<div style="padding: .5em;
overflow-y: auto; 
overflow-x: auto; 
white-space: pre-wrap;
margin-left: auto; margin-right: auto;
color: #00ff00;
text-align: left;
font-weight: bold;
width: 90%;
height: 8em;
background-color: #000000;
font-family: Courier;"
id="pretty"></div>
<div id="mesg"
style="width: 90%;
margin-left: auto; margin-right: auto;
text-align:
left;">Balance: </div>
&nbsp;<br>
<div onkeyup="onpCharInput(event)"
class="foo"
id="dpagecontentx"
contenteditable="true"
style="padding: .5em;
overflow-y: auto; 
overflow-x: auto; 
white-space: pre-wrap;
margin-left: auto; margin-right: auto;
font-family: Courier;
padding: .5em;
text-align: left;
border-color: #000000;
border-width: 1px;
border-style: solid;
width: 90%;
height: 8em;"></div>
<div style="margin-top: .5em; width: 90%; margin-left: auto; margin-right: auto; text-align: left;">
Content Size: <span class="bar" id="pccount">0</span>
</div>
<div style="margin-left: auto; margin-right: auto; width: 90%;">
<button onclick=showem()>Click for Demo</button>
<button onclick=clearem()>Click to Clear</button>
</div>
<br>
<div style="width: 90%; margin-left: auto; margin-right: auto; text-align: left;">
<h3>Reference Material:</h3>
<blockquote style="padding-top:0; margin-top:0;">
<a target="_blank" href="http://ourtimelines.com/aamacrodoc/tocpage.html"><b>aa_macro</b> manual</a><br>
<a target="_blank" href="http://ourtimelines.com/wtfm/tocpage.html"><b>wtfm</b> manual</a>
</blockquote>
<P>
<h3>Ultra-basic Guide</h3>
<P>
<b>wtfm</b> is a documentation system based on <b>aa_macro</b>.
</p>
<P>
<b>aa_macro</b> is a markup and macro language. It uses two types of tags:
</p>
<ol>
<li>Built-ins, designated by one of <a target="_blank" href="http://ourtimelines.com/aamacrodoc/builtinref.html">168 <b>pre</b>-defined keywords</a> inside <i>square</i> brackets: <span style="font-family: Courier; font-weight: bold;">[keyword]</span></li>
<li>Styles, designated by <b>user</b>-defined keywords inside <i>sqiggly</i> brackets: <span style="font-family: Courier; font-weight: bold;">{keyword}</span></li>
</ol>

<P>
You can pass parameters to styles; the built-in <span style="font-family: Courier; font-weight: bold;">[b]</span> represents content
past a style's keyword:
</p>

<div style="padding-left: 2em;">
<table>
<tr><td><span style="font-family: Courier; font-weight: bold;">[style italics &lt;i&gt;[b]&lt;i&gt;]</span></td><td><span style="color: #008800;">&larr; the style definition</span></td></tr>
</table>
</div>
<blockquote>

</blockquote>

<P>
When that style is used, the content, in this case, "<span style="font-family: Courier; font-weight: bold;">slanty text</span>", is passed
to the style and placed where the <span style="font-family: Courier; font-weight: bold;">[b]</span> tag is located:
</p>

<div style="padding-left: 2em;">
<table>
<tr><td><span style="font-family: Courier; font-weight: bold;">{italics slanty text}</span></td><td><span style="color: #008800;">&larr; the style invocation</span></td></tr>
<tr><td><span style="font-family: Courier; font-weight: bold;">&lt;i&gt;slanty text&lt;/i&gt;</span></td><td><span style="color: #008800;">&larr; the result</span></td></tr>
</table>
</div>

<P>
This is just the tip of the proverbial iceberg. <b>aa_macro's</b> broad
selection of built-in keywords provides the tools to process your text in
many ways; <b>aa_macro</b> styles can do almost anything to, and with, the
content passed to them.
</p>

</div>
<P>
<a href="http://validator.w3.org/check?uri=referer">
<b>Validated HTML 5</b>
</a>
</p>
</div>
</BODY>
</HTML>
